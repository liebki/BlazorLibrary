@inject SQLiteManager _db
@inject NavigationManager navMan

@page "/addgame"

<LoginCheck />

<MudText Typo="Typo.h4">Add a game to your library</MudText>

<div class="mt-1">
    <MudTextField Label="Name of the game" T="string" @bind-Value="Name" InputType="InputType.Text" />
</div>

<div class="mt-1">
    <MudTextField Label="Description of the game" T="string" @bind-Value="Beschreibung" InputType="InputType.Text" />
</div>

<div class="mt-1">
    <MudTextField Label="Url to image" T="string" @bind-Value="Bildlink" InputType="InputType.Text" />
</div>

<div class="mt-1">
    <MudTextField Label="Path to exe file" T="string" @bind-Value="Exepfad" InputType="InputType.Text" />
    <MudButton Class="mt-2" OnClick="SelectExeFile" Variant="Variant.Filled" Color="Color.Info" >Choose .exe file</MudButton>
</div>

<div class="mt-2">
    @if(GenreListe.Length > 0)
    {
        <MudSelect Placeholder="Choose genre for the new game" ToStringFunc="GenreIdToGenreName" Label="Choose genre for the new game" Class="" MultiSelection="true" T="Genre" @bind-SelectedValues="GenreAuswahl">
            @foreach (Genre gr in GenreListe)
            {
                <MudSelectItem Value="@gr">@gr.Name</MudSelectItem>
            }
        </MudSelect>
    } else
    {
        <MudText Color="Color.Error" Class="pb-2">Error: There are no genre, add some genre to use them here...</MudText>
    }
    <MudButton Class="mt-3" OnClick="speichereDaten" Variant="Variant.Filled" Color="Color.Success">Save game</MudButton>
</div>